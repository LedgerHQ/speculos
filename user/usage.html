<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usage &mdash; Speculos  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developer documentation" href="../dev/index.html" />
    <link rel="prev" title="Semihosting as an additional debug mechanism" href="semihosting.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Speculos
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api.html">REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="automation.html">Automation: press buttons automatically</a></li>
<li class="toctree-l2"><a class="reference internal" href="clients.html">Clients: how to send APDUs</a></li>
<li class="toctree-l2"><a class="reference internal" href="debug.html">Debug: how to use GDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html">Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="macm1.html">Docker - for Mac M1</a></li>
<li class="toctree-l2"><a class="reference internal" href="semihosting.html">Semihosting as an additional debug mechanism</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#keyboard-control">Keyboard control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#display">Display</a></li>
<li class="toctree-l3"><a class="reference internal" href="#app-name-and-version">App name and version</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bitcoin-testnet-app">Bitcoin Testnet app</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ocr">OCR</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">Developer documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Speculos</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">User</a></li>
      <li class="breadcrumb-item active">Usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user/usage.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h1>
<p>After having <a class="reference internal" href="../installation/build.html"><span class="std std-doc">installed the requirements and built</span></a> speculos:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./speculos.py<span class="w"> </span>apps/btc.elf
</pre></div>
</div>
<p>The docker image can also be used directly, as detailed in the specific <a class="reference internal" href="docker.html"><span class="std std-doc">docker documentation page</span></a>.</p>
<p>With applications built by recent SDKs, Speculos can automatically detect the targeted device. Otherwise, the Nano S is the default; the Nano X, Nano S+, Flex, Stax and Blue can be specified on the command line:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./speculos.py<span class="w"> </span>--model<span class="w"> </span>nanox<span class="w"> </span>apps/nanox#btc#2.0.2#1c8db8da.elf
./speculos.py<span class="w"> </span>--model<span class="w"> </span>nanosp<span class="w"> </span>apps/nanosp#btc#1.0.3#17bf7619.elf
./speculos.py<span class="w"> </span>--model<span class="w"> </span>blue<span class="w"> </span>--sdk<span class="w"> </span><span class="m">1</span>.5<span class="w"> </span>apps/blue#btc#1.5#00000000.elf
./speculos.py<span class="w"> </span>--model<span class="w"> </span>stax<span class="w"> </span>apps/btc.elf.elf
./speculos.py<span class="w"> </span>--model<span class="w"> </span>flex<span class="w"> </span>apps/btc.elf.elf
</pre></div>
</div>
<p>The last SDK version is automatically selected. However, a specific version
be specified if the target app is not build against the last version of the SDK,
thanks to the <code class="docutils literal notranslate"><span class="pre">-k</span></code>/<code class="docutils literal notranslate"><span class="pre">--sdk</span></code> argument. For instance, to launch an app built
against the SDK <code class="docutils literal notranslate"><span class="pre">1.5</span></code> on the Nano S:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./speculos.py<span class="w"> </span>--sdk<span class="w"> </span><span class="m">1</span>.5<span class="w"> </span>--model<span class="w"> </span>nanos<span class="w"> </span>apps/btc.elf
</pre></div>
</div>
<p>Supported SDK values for each device are defined in <a class="reference external" href="https://github.com/LedgerHQ/speculos/blob/master/src/sdk.h">src/sdk.h</a>.
You main choose the SDK using <code class="docutils literal notranslate"><span class="pre">-k</span></code>/<code class="docutils literal notranslate"><span class="pre">--sdk</span></code> argument:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>Nano S</p></th>
<th class="head"><p>Nano S+</p></th>
<th class="head"><p>Nano X</p></th>
<th class="head"><p>Blue</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SDK</p></td>
<td><p>1.5, 1.6, 2.0, 2.1</p></td>
<td><p>1.0, 1.0.3</p></td>
<td><p>1.2, 2.0, 2.0.2</p></td>
<td><p>1.5, blue-2.2.5</p></td>
</tr>
</tbody>
</table>
<p>For more options, pass the <code class="docutils literal notranslate"><span class="pre">-h</span></code> or <code class="docutils literal notranslate"><span class="pre">--help</span></code> flag.</p>
<section id="keyboard-control">
<h2>Keyboard control<a class="headerlink" href="#keyboard-control" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The keyboard left and right arrow keys are used instead of the Nano buttons.
The down arrow can also be used as a more convenient shortcut.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Q</span></code> key exits the application.</p></li>
</ul>
</section>
<section id="display">
<h2>Display<a class="headerlink" href="#display" title="Permalink to this heading"></a></h2>
<p>Several display options are available through the <code class="docutils literal notranslate"><span class="pre">--display</span></code> parameter:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">qt</span></code>: default, requires a X server</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">headless</span></code>: nothing is displayed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">text</span></code>: the UI is displayed in the console (handy on Windows)</p></li>
</ul>
<p>These options can be used along <code class="docutils literal notranslate"><span class="pre">--vnc-port</span></code> which spawns a VNC server on the
specified port. macOS users should also add <code class="docutils literal notranslate"><span class="pre">--vnc-password</span> <span class="pre">&lt;password&gt;</span></code> if using
the built-in VNC client because unauthenticated sessions doesn’t seem to be
supported (issue #34).</p>
<p>A recording of the screen can be saved as a GIF file thanks to the
<code class="docutils literal notranslate"><span class="pre">tools/gif-recorder.py</span></code> script.</p>
</section>
<section id="app-name-and-version">
<h2>App name and version<a class="headerlink" href="#app-name-and-version" title="Permalink to this heading"></a></h2>
<p>On a real device, some parameters specific to the app to be installed (name and
version, icon, allowed derivation paths, etc.) are given during the
installation. This information isn’t embedded in the .elf file itself and thus
cannot be retrieved by speculos.</p>
<p>The default app name and version are respectively <code class="docutils literal notranslate"><span class="pre">app</span></code> <code class="docutils literal notranslate"><span class="pre">1.33.7</span></code>, but these
values can be set through the <code class="docutils literal notranslate"><span class="pre">SPECULOS_APPNAME</span></code> environment variable. For
instance:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">SPECULOS_APPNAME</span><span class="o">=</span>blah:1.2.3.4<span class="w"> </span>./speculos.py<span class="w"> </span>./apps/btc.elf<span class="w"> </span><span class="p">&amp;</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;b0 01 00 00 00&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span><span class="nv">LEDGER_PROXY_ADDRESS</span><span class="o">=</span><span class="m">127</span>.0.0.1<span class="w"> </span><span class="nv">LEDGER_PROXY_PORT</span><span class="o">=</span><span class="m">9999</span><span class="w"> </span>ledgerctl<span class="w"> </span>send<span class="w"> </span>-<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>xxd<span class="w"> </span>-r<span class="w"> </span>-ps<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>hd
<span class="m">00000000</span><span class="w">  </span><span class="m">01</span><span class="w"> </span><span class="m">04</span><span class="w"> </span><span class="m">62</span><span class="w"> </span>6c<span class="w"> </span><span class="m">61</span><span class="w"> </span><span class="m">68</span><span class="w"> </span><span class="m">07</span><span class="w"> </span><span class="m">31</span><span class="w">  </span>2e<span class="w"> </span><span class="m">32</span><span class="w"> </span>2e<span class="w"> </span><span class="m">33</span><span class="w"> </span>2e<span class="w"> </span><span class="m">34</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">00</span><span class="w">  </span><span class="p">|</span>..blah.1.2.3.4..<span class="p">|</span>
<span class="m">00000010</span><span class="w">  </span><span class="m">90</span><span class="w"> </span><span class="m">00</span><span class="w">                                             </span><span class="p">|</span>..<span class="p">|</span>
<span class="m">00000012</span>
</pre></div>
</div>
</section>
</section>
<section id="bitcoin-testnet-app">
<h1>Bitcoin Testnet app<a class="headerlink" href="#bitcoin-testnet-app" title="Permalink to this heading"></a></h1>
<p>Launch the Bitcoin Testnet app, which requires the Bitcoin app:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./speculos.py<span class="w"> </span>./apps/btc-test.elf<span class="w"> </span>-l<span class="w"> </span>Bitcoin:./apps/btc.elf
</pre></div>
</div>
<section id="ocr">
<h2>OCR<a class="headerlink" href="#ocr" title="Permalink to this heading"></a></h2>
<p>OCR is available for NanoX, Nanos S+, Flex and Stax with built in character recognition.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="semihosting.html" class="btn btn-neutral float-left" title="Semihosting as an additional debug mechanism" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../dev/index.html" class="btn btn-neutral float-right" title="Developer documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Ledger.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>